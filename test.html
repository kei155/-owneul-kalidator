<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div>
        <div id="frm_login">
            <input type="text" name="str_id" />
            <input type="password" name="str_password" />
            <div>
                <input type="text" name="int_age" />
            </div>
            <div>
                <input type="text" name="str_email" />
            </div>
            <div>
                <input type="text" name="str_today" value="2019-04-25" />
                <input type="text" name="str_birthdate" />
            </div>
            <div>
                <select name="str_telecom" id="">
                    <option value="SKT">SKT</option>
                    <option value="KT">KT</option>
                    <option value="LG U+">LG</option>
                </select>
            </div>
            <div>
                <input type="radio" name="str_sex" id="str_sex_M" value="M"><label for="str_sex_M">남성</label>
                <input type="radio" name="str_sex" id="str_sex_F" value="F"><label for="str_sex_F">여성</label>
            </div>
            <div>
                <input type="file" name="file_avatar" id="">
            </div>
            <div>
                <input type="file" name="file_addimages" id="" multiple>
            </div>
            <div>
                <input type="text" name="str_code">
            </div>
            <button type="button" onclick="validate(frm_login)">확인(폼엘리먼트)</button>
        </div>
    </div>

    <div>
        <button type="button" onclick="validateFormData()">확인(폼데이터)</button>
    </div>

    <div>
        <button type="button" onclick="validateObject()">확인(오브젝트)</button>
    </div>

    <script>
        var rules = {
            // 'str_id(로그인 아이디)': ['required', 'minLength:5', 'maxLength:10'],
            'str_id(로그인 아이디)': ['required', 'betweenLength:5,10'],
            'str_password(비밀번호)': ['required'],
            'int_age(나이)': ['betweenValue:15,99', 'notIn:13,불명', 'number'],
            'str_email(메일주소)': ['email'],
            'str_telecom(이동통신사)': ['in:SKT,KT,LG U-'],
            'str_birthdate(생년월일)': ['required', 'date', 'earlierThan:str_today'],
            'str_today(오늘)': ['required'],
            'file_avatar(프로필 이미지)': ['required', 'file'],
            'file_addimages(첨부파일)': ['file:image/*,png,jpg,jpeg'],
            'str_code(보안코드)': ['required', 'ok:1'],
        };

        function validate(__form) {
            var validator = new Validator(__form);

            try {
                validator.setRules(rules)
                    .setMessages({
                        'str_id.required': ':param(은/는) 필수지롱',
                        'str_id.minLength': ':param(이/가) 최소 :$0자 이상은 되어야함',
                        'str_code.ok': ':param(이/가) 일치하지 않습니다.',
                        'file_addimages.file': ':param(은/는) 이미지 파일만 등록할 수 있습니다.',
                    })
                    .registTester('ok', function (__param, __extraValue, __data) {
                        return __data[__param] == 'abc';
                    })
                    .run({
                        pass: function () {

                        },
                        fail: notifyValidateErrors,
                    });
            } catch (error) {
                console.error(error);
            }
        }

        function notifyValidateErrors(__errors) {
            for (var key in __errors) {
                if (__errors.hasOwnProperty(key)) {
                    var invalids = __errors[key];
                    console.log(key, invalids);
                }
            }
        }

        function validateFormData() {
            var formData = new FormData;
            formData.append('str_id', 'tester');
            formData.append('str_password', 'test1234!!');

            var validator = new Validator(formData, rules);

            validator.run();
        }

        function validateObject() {
            var validator = new Validator({
                str_id: 'tester',
                str_password: 'test1234!!',
            });

            validator.setRules(rules);
            validator.run();
        }
    </script>

    <script src="./dist/index.js"></script>
    <script src="../Kate/dist/index.js"></script>
</body>
</html>